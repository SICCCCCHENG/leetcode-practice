<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>

        /*
        
        编写一个高效的算法来搜索 m x n 矩阵 matrix 中的一个目标值 target 。该矩阵具有以下特性：
            每行的元素从左到右升序排列。
            每列的元素从上到下升序排列。

        */


        var searchMatrix2 = function (matrix, target) {
            const row = matrix[0].length, col = matrix.length
            const shortSide = row < col ? row : col
            let lowIndex, highIndex
            if (target < matrix[shortSide - 1][shortSide - 1]) { // 可能在方形宫格内
                if (target === matrix[0][0]) {
                    return true
                }
                let i
                for (i = 1; i < shortSide - 1; i++) {
                    if (target === matrix[i][i]) {
                        return true
                    } else if (target > matrix[i - 1][i - 1] && target < matrix[i][i]) {
                        break
                    }
                }

                // 查找 x 方向上的
                lowIndex = 0, highIndex = i
                let midIndex
                while (lowIndex <= highIndex) {  // 二分查找
                    midIndex = ((lowIndex + highIndex) / 2).toFixed()
                    if (matrix[i][midIndex] === target) {
                        return true
                    } else if (matrix[i][midIndex] > target) {   // 在左侧
                        highIndex = midIndex - 1
                    } else { // 在右侧
                        lowIndex = midIndex + 1
                    }
                }

                // 查找 y 方向上的
                lowIndex = 0, highIndex = i
                while (lowIndex <= highIndex) {  // 二分查找
                    midIndex = ((lowIndex + highIndex) / 2).toFixed()
                    if (matrix[midIndex][i] === target) {
                        return true
                    } else if (matrix[midIndex][i] > target) {   // 在上侧
                        highIndex = midIndex - 1
                    } else { // 在下侧
                        lowIndex = midIndex + 1
                    }
                }

            } else if (target > matrix[shortSide - 1][shortSide - 1]) { // 可能在方形宫格外

            } else {  // 在方形宫格右下角，直接返回true
                return true
            }
        };

        var searchMatrix3 = function (matrix, target) {
            for (let ele of matrix) {
                for (let item of ele) {
                    if (item === target) {
                        return true
                    }
                }
            }
            return false
        }

        var searchMatrix4 = function (matrix, target) {
            for (let ele of matrix) {
                if (binarySearth(ele, target)) {
                    return true
                }
            }
            return false
        }

        const binarySearth = function (arr, target) {
            debugger
            let lowIndex = 0, highIndex = arr.length, midPoint
            while (lowIndex <= highIndex) {
                midPoint = Math.floor(((lowIndex + highIndex) / 2))
                if (arr[midPoint] === target) {
                    return true
                } else if (arr[midPoint] > target) {
                    highIndex = midPoint - 1
                } else {
                    lowIndex = midPoint + 1
                }
            }
            return false
        }






        var searchMatrix = function (matrix, target) {
            let row = 0, col = matrix[0].length - 1
            const m = matrix.length
            while (row < m && col >= 0) {
                if (target === matrix[row][col]) {
                    return true
                } else if (target > matrix[row][col]) {
                    row++
                } else {
                    col--
                }
            }
            return false
        }

        console.log(searchMatrix([
            [1, 4, 7, 11, 15],
            [2, 5, 8, 12, 19],
            [3, 6, 9, 16, 22],
            [10, 13, 14, 17, 24],
            [18, 21, 23, 26, 30]
        ], 5));


        console.log(searchMatrix([[-5]], -5));

    </script>
</body>

</html>