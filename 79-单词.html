<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>

        var exist2 = function (board, word) {
            const length = word.length
            const row = board.length
            const col = board[0].length
            const visited = new Array(row).fill(0).map(() => new Array(col).fill(false))
            let res
            const dfs = (x, y, index) => {
                if (index < length && board[x][y] === word[index]) {
                    if (index === length) return true
                    visited[x][y] = true
                    if ((x - 1) >= 0 && !visited[x - 1][y]) { // 上
                        res = dfs(x - 1, y, index + 1)
                        if (res) return true
                    }
                    if ((y + 1) < col && !visited[x][y + 1]) { // 右
                        res = dfs(x, y + 1, index + 1)
                        if (res) return true
                    }
                    if ((x + 1) < row && !visited[x + 1][y]) { // 下
                        res = dfs(x + 1, y, index + 1)
                        if (res) return true
                    }
                    if ((y - 1) >= 0 && !visited[x][y - 1]) { // 左
                        res = dfs(x, y - 1, index + 1)
                        if (res) return true
                    }
                    visited[x][y] = false
                }
            }
            debugger
            for (let i = 0; i < row; i++) {
                for (let j = 0; j < col; j++) {
                    if (board[i][j] === word[0]) {
                        res = dfs(i, j, 0)
                        if (res) return true
                    }
                }
            }
            return false
        };


        var exist = function (board, word) {
            const length = word.length
            const row = board.length
            const col = board[0].length
            // const visited = new Array(row).fill(0).map(() => new Array(col).fill(false))
            let res, temp
            const dfs = (x, y, index) => {
                if (index < length && board[x][y] === word[index]) {
                    if (index === length - 1) return true
                    temp = board[x][y]
                    board[x][y] = false
                    if ((x - 1) >= 0 && board[x - 1][y]) { // 上
                        res = dfs(x - 1, y, index + 1)
                        if (res) return true
                    }
                    if ((y + 1) < col && board[x][y + 1]) { // 右
                        res = dfs(x, y + 1, index + 1)
                        if (res) return true
                    }
                    if ((x + 1) < row && board[x + 1][y]) { // 下
                        res = dfs(x + 1, y, index + 1)
                        if (res) return true
                    }
                    if ((y - 1) >= 0 && board[x][y - 1]) { // 左
                        res = dfs(x, y - 1, index + 1)
                        if (res) return true
                    }
                    // 还原
                    board[x][y] = temp
                }
            }
            debugger
            for (let i = 0; i < row; i++) {
                for (let j = 0; j < col; j++) {
                    if (board[i][j] === word[0]) {
                        res = dfs(i, j, 0)
                        if (res) return true
                    }
                }
            }
            return false
        };
        // exist([["A", "B", "C", "E"], ["S", "F", "C", "S"], ["A", "D", "E", "E"]], 'ABCCED')
        exist([["b"], ["a"], ["b"], ["b"], ["a"]], 'baa')
    </script>
</body>

</html>