<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>

        // 广度
        // var canFinish = function (numCourses, prerequisites) {
        //     const length = prerequisites.length
        //     if (!length) return true
        //     const arr = new Array(numCourses).fill(0)
        //     const mapTable = new Map()
        //     let couseCount = 0
        //     const queue = []
        //     // 初始化
        //     for (const [course, pre] of prerequisites) {
        //         if (course === pre) return false
        //         arr[course]++  // 入度加一
        //         if (!mapTable.has(pre)) { // 对于 先修课 初始化
        //             mapTable.set(pre, [course])
        //         } else {
        //             mapTable.get(pre).push(course)
        //         }
        //     }
        //     // debugger
        //     // 队列初始化
        //     for (let i = 0; i < arr.length; i++) {
        //         if (arr[i] === 0) {
        //             couseCount++
        //             arr[i]--
        //             queue.push(i)
        //         }
        //     }
        //     debugger
        //     let pre, courseToTake
        //     while (queue.length) {
        //         pre = queue.shift()
        //         const array = mapTable.get(pre)
        //         if (array) {
        //             for (let i = 0; i < array.length; i++) {
        //                 courseToTake = mapTable.get(pre)[i]
        //                 if (arr[courseToTake] !== -1) {
        //                     arr[courseToTake]--
        //                     if (arr[courseToTake] === 0) {
        //                         couseCount++
        //                         if (couseCount === numCourses) return true
        //                         queue.push(courseToTake)
        //                         arr[courseToTake]--
        //                     }
        //                 }
        //             }
        //         }
        //     }
        //     return numCourses === couseCount
        // };

        // canFinish(5, [[1, 4], [2, 4], [3, 1], [3, 2]])


        /* 
        var canFinish = function (numCourses, prerequisites) {
            const visited = new Array(numCourses).fill(false)
            // 记录每个课程的先修课程
            const map = new Map()
            // 初始化 邻接表
            for (const [course, pre] of prerequisites) {
                if (!map.has(course)) {
                    map.set(course, [pre])
                } else {
                    map.get(course).push(pre)
                }
            }
            const dfs = (num) => {
                if(visited[num]) return false
                visited[num] = true
                if (!map.has(num) || helper(map.get(num))) return true
                const length = map.get(num).length
                for (let i = 0; i < length; i++) {
                    const res = dfs(map.get(num)[i])
                    if (res) map.get(num)[i] = -1
                    else return false
                }
                return true
            }
            for(let i = 0; i < numCourses; i++){
                if(!dfs(i)) return false
            }
            return true
        };
        const helper = (arr) => {
            for(let i = 0; i < arr.length; i++){
                if(arr[i] !== -1) return false
            }
            return true
        }
        
        */


    </script>
</body>

</html>