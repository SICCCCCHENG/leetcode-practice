<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        function maxSlidingWindow(nums, k) {
            const res = [], length = nums.length
            let queue = [], i = 0
            // initialize the sliding window
            for (i; i < k; i++) {
                queue = monotoneQuene(nums, queue, i)
            }
            res.push(queue[0])
            for (i = k; i < length; i++) {
                queue = monotoneQuene(nums, queue, i)
                while (i - queue[0] > k) {
                    queue.shift()
                }
                res.push(queue[0])
            }
            return res
        };
        function monotoneQuene(nums, queue, index) {
            while (true) {
                if (queue.length === 0 || nums[queue[queue.length - 1]] > nums[index]) {
                    queue.push(index)
                    break
                } else {
                    queue.pop()
                }
            }
            return queue
        }

        console.log(maxSlidingWindow([1,3,-1,-3,5,3,6,7], 3));

    </script>
</body>

</html>